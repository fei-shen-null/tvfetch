function showTvDetailModail(o){$.get("tvDetail/"+o,function(o){$("#tvDetailModal").find(".modal-body").html(o),$("#tvDetailModal").modal()},"html").fail(failFunc)}function checkCookie(){return document.cookie.indexOf("email=")>-1}function loginModalSubmit(){loginModalBtn.prop("disabled",!0),email=$("#loginModal").find("input[id=email]").val(),email=$.trim(email),$.post("login",{email:email},function(o){0!=o&&(toastr.info("Welcome "+email),setTimeout(function(){window.location.reload(!0)},300))}).fail(failFunc).always(function(){loginModalBtn.prop("disabled",!1),loginModal.modal("hide")})}function unSubTv(o){if(!checkCookie())return void loginModal.modal();var a=$("#sub"+o).first();a.fadeOut(),$.post("unsubscribe/"+o,{email:email},function(a){0!=a?($("#sub"+o).attr("onclick","subTv("+o+")").addClass("glyphicon-unchecked").removeClass("glyphicon-check").parent().attr("data-original-title","Subscribe").parents().eq(2).addClass("panel-default").removeClass("panel-success"),toastr.info("Subscription Canceled")):toastr.warning("Failed to Cancel Subscription")}).fail(failFunc).always(a.fadeIn())}function subTv(o){if(!checkCookie())return void loginModal.modal();var a=$("#sub"+o).first();a.fadeOut(),$.post("subscribe/"+o,{email:email},function(e){0!=e?(a.attr("onclick","unSubTv("+o+")").addClass("glyphicon-check").removeClass("glyphicon-unchecked").parent().attr("data-original-title","Unsubscribe").parents().eq(2).addClass("panel-success").removeClass("panel-default"),toastr.success("Subscription Success")):toastr.warning("Failed to Subscribe")}).fail(failFunc).always(a.fadeIn())}$(document).ready(function(){loginModal=$("#loginModal"),loginModalBtn=$("#loginModalSubmit"),failFunc=function(o){if(o.responseJSON)for(err in o.responseJSON)toastr.error(o.status+" "+o.responseJSON[err]);else o.responseText?toastr.error(o.status+" "+o.responseText):o.responseXML&&toastr.error(o.status+" "+o.responseXML)},$(".navbar").affix({offset:{top:$("header").outerHeight()}}),$('[data-toggle="tooltip"]').tooltip(),$("body").scrollspy({target:"#weekScrollspy",offset:50}),$("#weekNavbar").find("a").on("click",function(o){o.preventDefault();var a=this.hash;$("html, body").animate({scrollTop:$(a).offset().top},800,function(){window.location.hash=a})}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),checkCookie()?$("#logoutBtn").show():$("#logoutBtn").hide()});var email;